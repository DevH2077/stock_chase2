# 📱 앱 푸시 알림 설정 가이드

앱이 완전히 닫혀 있어도 알림을 받을 수 있도록 설정하는 방법입니다.

## 🚀 현재 구현된 기능

### ✅ 백그라운드 알림
- Service Worker를 통한 백그라운드 알림 체크
- Background Sync API 사용
- 앱이 백그라운드에 있어도 알림 발송

### ✅ 주기적 체크
- 10초마다 알림 조건 체크 (포그라운드)
- 30초마다 백그라운드 체크 (Service Worker)
- Background Sync로 주기적 동기화

## 📋 설정 방법

### 1. 알림 권한 허용
1. 앱 실행 시 알림 권한 요청 팝업에서 "허용" 클릭
2. 또는 브라우저 설정에서 수동으로 허용

### 2. PWA 설치
1. 홈 화면에 추가
2. 독립 앱처럼 실행
3. Service Worker 자동 등록

### 3. Background Sync 활성화
- 자동으로 활성화됨
- 알림이 등록되면 자동으로 Background Sync 등록

## 🔧 작동 원리

### 포그라운드 (앱이 열려 있을 때)
1. 10초마다 알림 조건 체크
2. 조건 충족 시 즉시 알림 발송

### 백그라운드 (앱이 닫혀 있을 때)
1. Service Worker가 30초마다 체크
2. Background Sync API로 주기적 동기화
3. 조건 충족 시 알림 발송

## ⚠️ 제한 사항

### Android
- ✅ 백그라운드 알림 지원
- ✅ 앱이 완전히 닫혀 있어도 작동
- ⚠️ 배터리 최적화가 켜져 있으면 지연 가능

### iOS
- ⚠️ 백그라운드 알림 제한적
- ⚠️ Safari에서만 작동
- ⚠️ iOS 16.4+ 버전 필요
- ⚠️ 앱이 완전히 닫혀 있으면 알림이 지연될 수 있음

## 🔔 알림이 안 올 때

### 1. 배터리 최적화 해제
- Android: 설정 > 배터리 > 배터리 최적화 > Chrome 선택 > 최적화 해제

### 2. 백그라운드 데이터 허용
- Android: 설정 > 데이터 사용량 > Chrome > 백그라운드 데이터 허용

### 3. Service Worker 확인
- 개발자 도구 > Application > Service Workers
- "activated" 상태 확인

### 4. Background Sync 확인
- 개발자 도구 > Application > Background Sync
- 등록된 sync 태그 확인

## 💡 최적화 팁

1. **고정 종목 사용**: 고정 종목은 30초마다 자동 업데이트되어 알림이 더 빠르게 발송됩니다
2. **목표 가격 설정**: 너무 먼 목표보다는 현실적인 목표를 설정하세요
3. **배터리 절약 모드**: 알림 지연을 방지하기 위해 배터리 절약 모드 해제 권장

## 🎯 완전한 푸시 알림 (선택사항)

더 강력한 푸시 알림을 원하시면:

### Web Push API with VAPID
- 서버 필요
- VAPID 키 생성 및 설정
- 완전한 푸시 알림 지원

### Firebase Cloud Messaging (FCM)
- 무료 서비스
- 서버 설정 필요
- 더 안정적인 푸시 알림

현재 구현으로도 대부분의 경우 충분히 작동합니다!

