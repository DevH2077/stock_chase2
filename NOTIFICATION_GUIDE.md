# 🔔 모바일 알림 설정 가이드

핸드폰에서 알림이 울리지 않는 경우 해결 방법입니다.

## 📱 Android (안드로이드)

### 1. 브라우저 알림 권한 확인

**Chrome 브라우저:**
1. Chrome 앱 설정 열기
2. "사이트 설정" 또는 "알림" 메뉴 찾기
3. `devh2077.github.io` 또는 `stock_chase2` 검색
4. 알림 권한이 "차단"되어 있으면 "허용"으로 변경

**Samsung Internet:**
1. 설정 > 사이트 및 다운로드
2. 알림 > 사이트 알림
3. 해당 사이트 찾아서 허용

### 2. Android 시스템 알림 설정

1. **설정 앱** 열기
2. **앱** 또는 **애플리케이션** 메뉴
3. **Chrome** 또는 사용 중인 브라우저 선택
4. **알림** 메뉴
5. **알림 허용** 켜기
6. **사이트 알림** 또는 **웹 알림** 허용

### 3. 배터리 최적화 해제

1. 설정 > 배터리
2. 배터리 최적화
3. Chrome 또는 브라우저 찾기
4. 최적화 해제

### 4. 백그라운드 데이터 허용

1. 설정 > 데이터 사용량
2. Chrome 또는 브라우저 선택
3. 백그라운드 데이터 허용

## 🍎 iOS (아이폰/아이패드)

### 1. Safari 알림 권한

1. **설정** 앱 열기
2. **Safari** 선택
3. **알림** 메뉴
4. **허용** 켜기

### 2. 사이트별 알림 설정

1. Safari에서 사이트 열기
2. 주소창 왼쪽의 **aA** 아이콘 클릭
3. **웹사이트 설정**
4. **알림** 허용

### 3. iOS 알림 설정

1. 설정 > 알림
2. Safari 찾기
3. 알림 허용 켜기
4. 배지, 소리, 화면 표시 등 설정

## 🔧 문제 해결 체크리스트

### ✅ 기본 확인 사항

- [ ] 브라우저에서 알림 권한이 허용되어 있는가?
- [ ] PWA가 홈 화면에 설치되어 있는가?
- [ ] Service Worker가 정상 등록되어 있는가?
- [ ] 인터넷 연결이 되어 있는가?

### ✅ Service Worker 확인 방법

1. 브라우저 개발자 도구 열기 (F12 또는 메뉴)
2. **Application** 탭 (Chrome) 또는 **저장소** 탭 (Firefox)
3. **Service Workers** 메뉴 확인
4. Service Worker가 "activated" 상태인지 확인

### ✅ 알림 테스트

1. 알림 등록 후 목표 가격을 현재 가격과 매우 가까운 값으로 설정
2. 주식 데이터가 업데이트되면 알림이 발송되는지 확인
3. 브라우저 콘솔에서 오류 메시지 확인

## 🚨 자주 발생하는 문제

### 문제 1: 알림이 한 번만 울림
**원인:** 알림이 발송된 후 `triggered: true`로 설정되어 다시 발송되지 않음
**해결:** 알림 삭제 후 다시 등록

### 문제 2: 백그라운드에서 알림이 안 울림
**원인:** Service Worker가 제대로 등록되지 않음
**해결:**
1. 브라우저 캐시 삭제
2. Service Worker 등록 해제 후 다시 등록
3. PWA 재설치

### 문제 3: iOS에서 알림이 안 울림
**원인:** iOS는 백그라운드 알림에 제한이 있음
**해결:**
1. Safari에서만 작동 (Chrome 불가)
2. 앱이 포그라운드에 있을 때만 알림 가능
3. iOS 16.4+ 버전 필요

## 📝 알림 작동 원리

1. **알림 등록:** 사용자가 목표 가격/퍼센트 설정
2. **주기적 체크:** 10초마다 현재 가격 확인
3. **조건 충족:** 목표 가격에 도달하면 알림 발송
4. **Service Worker:** 백그라운드에서 알림 발송
5. **브라우저 알림:** Service Worker 실패 시 브라우저 알림 사용

## 🔔 알림 권한 다시 요청

알림 권한이 거부된 경우:

1. 브라우저 설정에서 사이트 알림 권한 삭제
2. 페이지 새로고침
3. 알림 등록 시 권한 요청 팝업 확인
4. "허용" 클릭

## 💡 추가 팁

- **테스트 알림:** 목표 가격을 현재 가격과 매우 가까운 값으로 설정하여 즉시 테스트 가능
- **배터리 절약 모드:** 배터리 절약 모드가 켜져 있으면 알림이 지연될 수 있음
- **방해 금지 모드:** 방해 금지 모드가 켜져 있으면 알림이 표시되지 않을 수 있음

## 🌐 브라우저별 지원

| 브라우저 | 백그라운드 알림 | 포그라운드 알림 |
|---------|---------------|---------------|
| Chrome (Android) | ✅ | ✅ |
| Samsung Internet | ✅ | ✅ |
| Safari (iOS) | ⚠️ 제한적 | ✅ |
| Firefox (Android) | ✅ | ✅ |

## 📞 추가 도움이 필요하신가요?

- 브라우저 콘솔에서 오류 메시지 확인
- Service Worker 상태 확인
- 알림 권한 상태 확인: `Notification.permission` (콘솔에서 실행)

